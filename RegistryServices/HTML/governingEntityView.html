<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
        <link rel="stylesheet" href="../CSS/style.css">
        
        <!-- AuthManager.js provides global AuthManager and AUTH_CONFIG; initialization is now handled centrally -->
        <script src="../JS/auth/authManager.js"></script>
        <script>
        // Ensure global authManager is always initialized
        if (!window.authManager) {
            window.authManager = new window.AuthManager();
            console.debug('[DEBUG] window.authManager initialized globally in governingEntityView.html');
        }
        </script>
        <script src="../JS/sidebarManager.js"></script>
        <script src="../JS/dataManager.js"></script>
        <script src="../JS/javascript.js"></script>
        <script src="../JS/governingEntity.js"></script>
        
        <title>Governing Entities</title>
    </head>
    <body>
<!----------------------------------------------------------------------------
            Sidebar
  ------------------------------------------------------------------------------>
        <div id="sidebarContainer">
            <!-- Sidebar will be dynamically generated by sidebarManager.js -->
        </div>

<!----------------------------------------------------------------------------
            Governing Entities Table
  ------------------------------------------------------------------------------>
        <div class="page-Content">
            <h1 id="entityTitle"><i class="fa-solid fa-building"></i> Viewing Governing Entity</h1>
            <br/>
            <button onclick="window.location.href='governingEntityList.html';">Return to Governing Entity List</button>

            <div id="adminNewSpecContainer" style="text-align: right; margin-bottom: 0;"></div>
            <div id="entityDetails"></div>
            <div id="specificationsSection"></div>
            <div id="usersSection"></div>
            
        </div>
        
        <script>
            // The governing entity functionality is now handled by governingEntity.js
            // This script will automatically initialize the appropriate class based on the current page
            console.log('GoverningEntityView page loaded');
            
            // Make startEdit function available globally for backward compatibility
            function startEdit(event) {
                if (window.governingEntityView) {
                    const button = event.target;
                    const specName = button.getAttribute('data-spec-name');
                    const specParams = button.getAttribute('data-spec-params');
                    window.governingEntityView.startEdit(specName, specParams);
                } else {
                    console.error('GoverningEntityView instance not found');
                }
            }
        </script>
        
        <script>
            // Explicitly initialize sidebar after all scripts are loaded
            window.addEventListener('DOMContentLoaded', function() {
                console.log('[DEBUG] Explicit sidebar initialization');
                window.sidebarManager.initializeSidebar(window.authManager);
            });
        </script>
    </body>
</html>